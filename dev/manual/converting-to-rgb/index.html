<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Converting to RGB · AstroImages.jl</title><meta name="title" content="Converting to RGB · AstroImages.jl"/><meta property="og:title" content="Converting to RGB · AstroImages.jl"/><meta property="twitter:title" content="Converting to RGB · AstroImages.jl"/><meta name="description" content="Documentation for AstroImages.jl."/><meta property="og:description" content="Documentation for AstroImages.jl."/><meta property="twitter:description" content="Documentation for AstroImages.jl."/><meta property="og:url" content="https://JuliaAstro.org/AstroImages/stable/manual/converting-to-rgb/"/><meta property="twitter:url" content="https://JuliaAstro.org/AstroImages/stable/manual/converting-to-rgb/"/><link rel="canonical" href="https://JuliaAstro.org/AstroImages/stable/manual/converting-to-rgb/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/theme.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="AstroImages.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">AstroImages.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../getting-started/">Getting Started</a></li><li><a class="tocitem" href="../loading-and-saving-images/">Loading &amp; Saving Images</a></li><li><a class="tocitem" href="../displaying-images/">Displaying Images</a></li><li><a class="tocitem" href="../array/">Array Operations</a></li><li><a class="tocitem" href="../headers/">Headers</a></li><li><a class="tocitem" href="../dimensions-and-world-coordinates/">Dimensions and World Coordinates</a></li><li><a class="tocitem" href="../polarization/">Polarization</a></li><li><a class="tocitem" href="../spec/">Spectral Axes</a></li><li><a class="tocitem" href="../preserving-wrapper/">Preserving Wrapper</a></li><li><a class="tocitem" href="../conventions/">Conventions</a></li><li class="is-active"><a class="tocitem" href>Converting to RGB</a><ul class="internal"><li><a class="tocitem" href="#Using-composecolors"><span>Using <code>composecolors</code></span></a></li></ul></li><li><a class="tocitem" href="../converting-from-rgb/">Converting from RGB</a></li></ul></li><li><span class="tocitem">Guides</span><ul><li><a class="tocitem" href="../../guide/image-filtering/">Blurring &amp; Filtering Images</a></li><li><a class="tocitem" href="../../guide/image-transformations/">Transforming Images</a></li><li><a class="tocitem" href="../../guide/reproject/">Reprojecting Images</a></li><li><a class="tocitem" href="../../guide/photometry/">Extracting Photometry</a></li><li><a class="tocitem" href="../../guide/contours/">Plotting Contours</a></li></ul></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Converting to RGB</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Converting to RGB</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaAstro/AstroImages.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaAstro/AstroImages.jl/blob/master/docs/src/manual/converting-to-rgb.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Converting-to-RGB"><a class="docs-heading-anchor" href="#Converting-to-RGB">Converting to RGB</a><a id="Converting-to-RGB-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-to-RGB" title="Permalink"></a></h1><p>If you have two or more images of the same scene taken at different wavelengths, you may wish to combine them to create a color composite.</p><p>For ultimate control, you can do this manually using <code>imview</code>. Simply map your channels to <code>RGB</code> values using <code>imview</code> and then sum the results.</p><p>For convenience, AstroImages.jl provides the function <a href="../../api/#AstroImages.composecolors"><code>composecolors</code></a>.</p><h2 id="Using-composecolors"><a class="docs-heading-anchor" href="#Using-composecolors">Using <code>composecolors</code></a><a id="Using-composecolors-1"></a><a class="docs-heading-anchor-permalink" href="#Using-composecolors" title="Permalink"></a></h2><p>We&#39;ll demonstrate <code>composecolors</code> using Hubble images of the <a href="https://esahubble.org/projects/fits_liberator/antennaedata/">Antenae colliding galaxies</a>.</p><p>One can be very scientific about this process, but often the goal of producing color composites is aesthetic or about highlighting certain features for public consumption.</p><p>Let&#39;s set the default color map to grayscale to avoid confusion.</p><pre><code class="language-julia hljs">using AstroImages

AstroImages.set_cmap!(nothing)</code></pre><p>Let&#39;s start by downloading the separate color channel FITS files:</p><pre><code class="language-julia hljs">using Downloads: download

# We crop some of the images a bit to help align them with the other color channels
antred = load(download(&quot;https://esahubble.org/static/projects/fits_liberator/datasets/antennae/red.fits&quot;))[:, begin+14:end]</code></pre><img src="2dd41572.png" alt="Example block output"/><pre><code class="language-julia hljs">antgreen = load(download(&quot;https://esahubble.org/static/projects/fits_liberator/datasets/antennae/green.fits&quot;))</code></pre><img src="30a57acb.png" alt="Example block output"/><pre><code class="language-julia hljs">antblue = load(download(&quot;https://esahubble.org/static/projects/fits_liberator/datasets/antennae/blue.fits&quot;))[:, begin+14:end]</code></pre><img src="f957fcf8.png" alt="Example block output"/><pre><code class="language-julia hljs">anthalph = load(download(&quot;https://esahubble.org/static/projects/fits_liberator/datasets/antennae/hydrogen.fits&quot;))[:, begin+14:end]; # Hydrogen-Alpha; we&#39;ll revisit later</code></pre><img src="0c9242f6.png" alt="Example block output"/><p>In order to compose these images, we&#39;ll have to match the relative intensity scales and clip outlying values. Thankfully, <code>composecolors</code> handles most of these details automatically:</p><pre><code class="language-julia hljs">rgb1 = composecolors([antred, antgreen, antblue])</code></pre><img src="595a74af.png" alt="Example block output"/><p>It&#39;s a start!</p><div class="admonition is-info" id="Note-7f061bf3c609538"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-7f061bf3c609538" title="Permalink"></a></header><div class="admonition-body"><p>For best results, the images should be properly aligned and cropped to the same size before making a color composite. The simple cropping we did here is just for demonstration purposes.</p></div></div><p>By default, if you provide three images these are mapped to the color channels red, green, and blue. The intensities are limited to <code>Percent(99.5)</code>.</p><p>We can now tweak these defaults to our tastes. We could try clamping the intensities more agressively to bring out more of the galaxy structure:</p><pre><code class="language-julia hljs">rgb2 = composecolors([antred, antgreen, antblue];
    clims = Percent(97),
)</code></pre><img src="870c63b7.png" alt="Example block output"/><p>This looks okay but saturates the galaxy cores.</p><p>Let&#39;s take care of that gash through the image by just blanking it out:</p><pre><code class="language-julia hljs">mask = antgreen .== antgreen[end,begin]
# remove holes in the mask
using ImageFiltering, Statistics
mask = BitMatrix(mapwindow(median, mask, (3,3)))
imview(mask)</code></pre><img src="442ddbb3.png" alt="Example block output"/><pre><code class="language-julia hljs">antred[mask] .= NaN
antgreen[mask] .= NaN
antblue[mask] .= NaN
anthalph[mask] .= NaN</code></pre><p>Typically we need to perform a &quot;gamma correction&quot; aka non-lienar stretch to map the wide dynamic range of astronomical images into a narrower human visible range. We can do this using the <code>stretch</code> keyword. An <code>asinhstretch</code> is typically recommended when preparing RGB images:</p><pre><code class="language-julia hljs">rgb3 = composecolors([antred, antgreen, antblue];
    stretch = asinhstretch,
)</code></pre><img src="df6df63f.png" alt="Example block output"/><p>Keywords like <code>stretch</code>, <code>clims</code>, etc can be either a single value for all channels or a list of separate values/functions per channel.</p><p>The green channel appears to be quite faint compared to the red and blue channels. We can modify that by adjusting the relative intensities of the channels.</p><p>We could also do this using a combination of the <code>contrast</code> and <code>bias</code> keywords:</p><pre><code class="language-julia hljs">rgb4 = composecolors([antred, antgreen, antblue];
    stretch = asinhstretch,
    multiplier = [1,1.7,1],
)</code></pre><img src="4712be86.png" alt="Example block output"/><p>That&#39;s better! Let&#39;s go one step further, and incorporate a fourth chanel: Hydrogen Alpha. Hydrogen Alpha is a narrow filter centered around one of the emission lines of Hydrogen atoms. It traces locations with hot gas; mostly star-formation regions in this case:</p><pre><code class="language-julia hljs">imview(anthalph; cmap = :magma, clims = Zscale())</code></pre><img src="9fd2678d.png" alt="Example block output"/><p>We&#39;ll now need to specify the color channels we want to use for each wavelength since we can&#39;t use just the default three RGB. We can use any named color or julia ColorScheme:</p><pre><code class="language-julia hljs">rgb5 = composecolors([antred, antgreen, antblue, anthalph], [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;maroon1&quot;];
    stretch = asinhstretch,
    multiplier = [1,1.7,1,0.8],
)</code></pre><img src="5cd658e7.png" alt="Example block output"/><p>Additionally, we&#39;d like to just show the brightest areas of Hydrogen alpha emission rather than adding a diffuse pink glow. We can turn off the stretch for this one channel:</p><pre><code class="language-julia hljs">rgb6 = composecolors([antred, antgreen, antblue, anthalph], [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;maroon1&quot;];
    stretch = [
        asinhstretch,
        asinhstretch,
        asinhstretch,
        identity,
    ],
    multiplier = [1, 1.7, 1, 0.8]
)</code></pre><img src="fd8b92b7.png" alt="Example block output"/><p>Finally, we can crop the image and save it as a PNG:</p><pre><code class="language-julia hljs">crop = rgb6[200:end-100, 50:end-50]</code></pre><img src="328ebf5c.png" alt="Example block output"/><pre><code class="language-julia hljs">save(&quot;antenae-composite.png&quot;, crop)</code></pre><p>If you want to save it in a format like JPG that doesn&#39;t support transparent pixels, you could replace the masked area with zeros instead of <code>NaN</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../conventions/">« Conventions</a><a class="docs-footer-nextpage" href="../converting-from-rgb/">Converting from RGB »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 4 December 2025 05:13">Thursday 4 December 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
